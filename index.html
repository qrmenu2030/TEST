<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>QR –ú–µ–Ω—é ‚Äî –ë–µ–ª–∞—è —Ç–µ–º–∞</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
:root{
  --card:#ffffff; --text:#1f2328; --muted:#6b7280;
  --accent:#ff9900; --accent-dark:#e68a00; --green:#25d366; --green-dark:#1fb457;
  --red:#ff4d4d; --shadow:0 10px 24px rgba(0,0,0,.06); --radius:16px;
  --bg-gradient: linear-gradient(120deg, #fff9f0, #ffedcc);
  --category-pizza: #ff8a65; --category-hotdog: #ffb74d; --category-drink: #4fc3f7; --category-dessert: #ba68c8;
}
*{box-sizing:border-box;}
html,body{margin:0;padding:16px;font-family:"Poppins",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;line-height:1.6;background: var(--bg-gradient); color:var(--text);}
.wrap{max-width:900px;margin:0 auto;}
.brand{display:flex;align-items:center;gap:12px;margin:4px 0 18px;flex-wrap:wrap;}
.logo{width:60px;height:60px;display:grid;place-items:center;background: var(--accent); border-radius: 12px; padding: 8px;}
.logo img{width:100%;height:auto;}
.title{font-size:1.4rem;font-weight:700;color:#d35400; text-shadow:1px 1px 1px rgba(0,0,0,0.1);}
.subtitle{color:#e67e22;font-size:.95rem;margin-top:-6px;}

.search-container {margin: 20px 0; position: relative;}
.search-container input {width: 100%; padding: 12px 20px; border-radius: 30px; border: 1px solid #ddd; font-family: inherit; box-shadow: var(--shadow);}
.search-container i {position: absolute; right: 20px; top: 50%; transform: translateY(-50%); color: var(--muted);}

h2.section{margin:22px 6px 10px;font-size:1.1rem;font-weight:700;color:#111; display: flex; align-items: center; gap: 8px;}
h2.section::before {content: ''; display: block; width: 20px; height: 20px; border-radius: 50%;}
h2.section.pizza::before {background: var(--category-pizza);}
h2.section.hotdog::before {background: var(--category-hotdog);}
h2.section.drink::before {background: var(--category-drink);}
h2.section.dessert::before {background: var(--category-dessert);}

.grid{display:grid;grid-template-columns:1fr;gap:16px;}
@media(min-width:500px){.grid{grid-template-columns:1fr 1fr;}}
@media(min-width:800px){.grid{grid-template-columns:repeat(3,1fr);}}
@media(min-width:1100px){.grid{grid-template-columns:repeat(4,1fr);}}
.card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:16px;display:flex;flex-direction: column; transition:transform .12s ease, box-shadow .12s ease; position: relative; overflow: hidden;}
.card:hover{transform:translateY(-4px); box-shadow:0 12px 28px rgba(0,0,0,.08);}
.thumb{width:100%;height:140px;border-radius:12px;flex:0 0 auto;background-size: cover; background-position: center; margin-bottom: 12px;}
.info{flex:1;min-width:0;}
.name{font-weight:600; margin-bottom: 4px;}
.muted{color:var(--muted);font-size:.9rem; overflow-wrap: break-word; margin-bottom: 12px;}
.card-footer {display: flex; justify-content: space-between; align-items: center;}
.price{background:var(--accent);padding:6px 12px;border-radius:999px;font-weight:700;color:#111;font-size:.95rem;}
.add{border:none;cursor:pointer;width:40px;height:40px;border-radius:999px;background:var(--green);color:#fff;font-size:18px;display:grid;place-items:center;transition:transform .08s ease, background .12s ease;}
.add:active{ transform:scale(.96); }
.add:hover{ background:var(--green-dark); }
.right{display:flex;align-items:center;gap:10px;margin-left:auto;flex-shrink:0;}
.qty-btn{width:34px;height:34px;border-radius:999px;border:none;background:#e9edf2;color:#111;cursor:pointer;display:grid;place-items:center;font-size:14px;transition:background .12s ease, transform .08s ease;}
.qty-btn:hover{ background:#dfe6ee; }
.qty-btn:active{ transform:scale(.96); }
.toast{position:fixed;left:50%;bottom:20px;transform:translateX(-50%);background:#111;color:#fff;padding:10px 14px;border-radius:999px;box-shadow:var(--shadow);opacity:.98;z-index:9999;font-weight:600;}
.cart-btn{position:fixed;right:20px;bottom:20px;background:var(--green);color:#fff;border:none;border-radius:50%;width:60px;height:60px;display:grid;place-items:center;z-index:1000;cursor:pointer;box-shadow: 0 4px 12px rgba(0,0,0,0.15); transition: all 0.2s ease;}
.cart-btn:hover {transform: scale(1.05);}
#cart-count{position:absolute;top:-6px;right:-6px;background:var(--red);color:#fff;font-size:0.8rem;font-weight:700;border-radius:50%;width:20px;height:20px;display:grid;place-items:center;}
.cart-modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.4);display:flex;justify-content:center;align-items:center;z-index:999; opacity: 0; visibility: hidden; transition: all 0.3s ease;}
.cart-modal.active {opacity: 1; visibility: visible;}
.cart-content{background:var(--card);border-radius:var(--radius);padding:24px;max-width:400px;width:90%;max-height:90%;overflow-y:auto;box-shadow:var(--shadow);position:relative; transform: translateY(20px); transition: transform 0.3s ease;}
.cart-modal.active .cart-content {transform: translateY(0);}
#cart-close{position:absolute;top:16px;right:16px;font-size:1.5rem;cursor:pointer; width: 30px; height: 30px; display: grid; place-items: center; border-radius: 50%;}
#cart-close:hover {background: #f5f5f5;}
.cart-content h3 {margin-top: 0; display: flex; align-items: center; gap: 10px;}
.line-left{display:flex;align-items:center;gap:8px;flex-wrap:wrap;}
.qty-pill{background:#e9edf2;padding:2px 8px;border-radius:12px;}
.line-left i{color:var(--green);}
.line-right button{margin-left:4px;}
.cart-item {display: flex; justify-content: space-between; align-items: center; padding: 12px 0; border-bottom: 1px solid #f0f0f0;}
.cart-item:last-child {border-bottom: none;}
.sum{display:flex;justify-content:space-between;font-weight:700;margin-top:20px;flex-wrap:wrap; padding-top: 16px; border-top: 2px dashed #eee;}
.cta{margin-top:20px;display:flex;gap:8px;flex-direction:column;}
.cta a.whatsapp{display:flex;align-items:center;gap:6px;justify-content:center;background:#25d366;color:#fff;padding:12px;border-radius:12px;text-decoration:none;font-weight:600; transition: all 0.2s ease;}
.cta a.whatsapp.disabled{background:#a5d6a7;pointer-events:none;}
.cta a.whatsapp:hover:not(.disabled){background:#1fb457; transform: translateY(-2px);}
.cta button.clear{background:#ff4d4d;color:#fff;padding:12px;border:none;border-radius:12px;cursor:pointer;font-weight:600; transition: all 0.2s ease;}
.cta button.clear.disabled{background:#f8bcbc;pointer-events:none;}
.cta button.clear:hover:not(.disabled) {background: #ff3333; transform: translateY(-2px);}
.empty-cart{text-align:center;color:var(--muted);font-style:italic;margin-top:20px; padding: 20px 0;}
.badge {position: absolute; top: 10px; right: 10px; background: var(--accent); color: #fff; padding: 4px 8px; border-radius: 20px; font-size: 0.7rem; font-weight: 600;}
</style>
</head>
<body>
<div class="wrap">
  <div class="brand">
    <div class="logo"><i class="fa-solid fa-utensils" style="color: white; font-size: 1.8rem;"></i></div>
    <div>
      <div class="title">Pizza & Grill</div>
      <div class="subtitle">–í—ã–±–µ—Ä–∏—Ç–µ –±–ª—é–¥–∞ ‚Äî –æ—Ñ–æ—Ä–º–∏—Ç–µ –∑–∞–∫–∞–∑ –≤ WhatsApp</div>
    </div>
  </div>

  <div class="search-container">
    <input type="text" id="search-input" placeholder="–ü–æ–∏—Å–∫ –±–ª—é–¥...">
    <i class="fa-solid fa-search"></i>
  </div>

  <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
  <h2 class="section pizza">–ü–∏—Ü—Ü–∞</h2>
  <div class="grid"></div>

  <h2 class="section hotdog">–•–æ—Ç-–¥–æ–≥–∏</h2>
  <div class="grid"></div>

  <h2 class="section drink">–ù–∞–ø–∏—Ç–∫–∏</h2>
  <div class="grid"></div>

  <h2 class="section dessert">–î–µ—Å–µ—Ä—Ç—ã</h2>
  <div class="grid"></div>
</div>

<button id="cart-btn" class="cart-btn">
  <i class="fa-solid fa-cart-shopping"></i>
  <span id="cart-count">0</span>
</button>

<div id="cart-modal" class="cart-modal">
  <div class="cart-content">
    <span id="cart-close">&times;</span>
    <h3><i class="fa-solid fa-cart-shopping"></i> –ö–æ—Ä–∑–∏–Ω–∞</h3>
    <ul id="cart-items"></ul>
    <div id="empty-msg" class="empty-cart" style="display:none;">–ö–æ—Ä–∑–∏–Ω–∞ –ø–æ–∫–∞ –ø—É—Å—Ç–∞ üõí</div>
    <div class="sum">
      <span>–ò—Ç–æ–≥–æ:</span>
      <span id="cart-total">0 c</span>
    </div>
    <div class="cta">
      <a id="send-order" class="whatsapp disabled" target="_blank">
        <i class="fa-brands fa-whatsapp"></i> –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑
      </a>
      <button id="clear-cart" class="clear disabled">
        <i class="fa-solid fa-trash-can"></i> –û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É
      </button>
    </div>
  </div>
</div>

<!-- Tabletop –¥–ª—è Google Sheets -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/tabletop.js/1.5.1/tabletop.min.js"></script>

<script>
let cart = JSON.parse(localStorage.getItem('cart') || '[]');
updateCartUI();

const sheetID = "1536OW6-bxV0sE8X7V8sd9iSudAzyO4pdvImX1PL9WWY";

window.addEventListener('DOMContentLoaded', () => {
  Tabletop.init({
    key: sheetID,
    simpleSheet: true,
    callback: populateMenu
  });

  document.getElementById('search-input').addEventListener('input', function(e) {
    const searchTerm = e.target.value.toLowerCase();
    const cards = document.querySelectorAll('.card');
    cards.forEach(card => {
      const name = card.querySelector('.name').textContent.toLowerCase();
      if(name.includes(searchTerm)) card.style.display = 'flex';
      else card.style.display = 'none';
    });
  });
});

function populateMenu(data) {
  const grids = {
    pizza: document.querySelector('h2.pizza + .grid'),
    hotdog: document.querySelector('h2.hotdog + .grid'),
    drink: document.querySelector('h2.drink + .grid'),
    dessert: document.querySelector('h2.dessert + .grid')
  };

  data.forEach(item => {
    const category = item['–ö–∞—Ç–µ–≥–æ—Ä–∏—è'].toLowerCase();
    if(!grids[category]) return;

    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `
      <div class="thumb" style="background-image: url('${item['–§–æ—Ç–æ (URL)']}')"></div>
      <div class="info">
        <div class="name">${item['–ù–∞–∑–≤–∞–Ω–∏–µ']}</div>
        <div class="muted"></div>
      </div>
      <div class="card-footer">
        <div class="price">${item['–¶–µ–Ω–∞']} c</div>
        <button class="add" onclick="addToCart('${item['–ù–∞–∑–≤–∞–Ω–∏–µ']}',${item['–¶–µ–Ω–∞']}, '${category}')">
          <i class="fa-solid fa-plus"></i>
        </button>
      </div>
    `;
    grids[category].appendChild(card);
  });
}

// --- –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∫–æ—Ä–∑–∏–Ω—ã (addToCart, updateCartUI, toast, clear, etc.) ---
// –≤—Å—Ç–∞–≤–ª—è–µ–º —Å—é–¥–∞ —Ç–æ—Ç –∂–µ –∫–æ–¥ –∫–æ—Ä–∑–∏–Ω—ã, –∫–æ—Ç–æ—Ä—ã–π —É —Ç–µ–±—è –±—ã–ª –≤—ã—à–µ
// –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–≤–æ–π —É–∂–µ –≥–æ—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç, –æ–Ω –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è
</script>
</body>
</html>